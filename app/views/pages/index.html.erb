<%= render "govuk_publishing_components/components/title", {
    title: "Content pages with feedback comments"
} %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <h4 class="govuk-heading-s"><%= human_readable_date_range(from_date_as_datetime, to_date_as_datetime) %></h4>
  </div>
</div>
<%= form_with(url: pages_url, method: "get") do %>
  <%= hidden_field_tag :sort_key, sort_key %>
  <%= hidden_field_tag :sort_dir, sort_dir %>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <div class="govuk-grid-column-full--background-light-grey govuk-!-padding-4">
        <div class="govuk-grid-row">
          <div class="govuk-grid-column-full">
            <h4 class="govuk-heading-s"><%= human_readable_date_duration(from_date_as_datetime, to_date_as_datetime) %></h4>
            <%= render "govuk_publishing_components/components/details", {
                title: "Change time period"
            } do %>
              <div class="govuk-grid-row govuk-!-margin-top-4">
                <div class="govuk-grid-column-one-third">
                  <%= render "govuk_publishing_components/components/date_input", {
                    name: "from_date",
                    legend_text: "Visits on or after",
                    items:
                      [
                        {
                          label: "Day",
                          name: "day",
                          width: 2,
                          value: from_date[:day],
                        },
                        {
                          label: "Month",
                          name: "month",
                          width: 2,
                          value: from_date[:month],
                        },
                        {
                          label: "Year",
                          name: "year",
                          width: 4,
                          value: from_date[:year],
                        },
                      ]
                  } %>
                </div>
                <div class="govuk-grid-column-one-third">
                  <%= render "govuk_publishing_components/components/date_input", {
                    name: "to_date",
                    legend_text: "Visits on or before",
                    items:
                      [
                        {
                          label: "Day",
                          name: "day",
                          width: 2,
                          value: to_date[:day],
                        },
                        {
                          label: "Month",
                          name: "month",
                          width: 2,
                          value: to_date[:month],
                        },
                        {
                          label: "Year",
                          name: "year",
                          width: 4,
                          value: to_date[:year],
                        },
                      ]
                  } %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
        <div class="govuk-grid-row">
          <div class="govuk-grid-column-two-thirds">
            <%= render "govuk_publishing_components/components/input", {
              label: {
                text: "Search for a title or URL"
              },
              name: "q",
              value: q
            } %>
          </div>
        </div>
        <div class="govuk-grid-row">
          <div class="govuk-grid-column-one-third">
            <%= render "govuk_publishing_components/components/select", {
              id: "dropdown1-1",
              full_width: true,
              label: "What was the user trying to do?",
              name: "verb",
              options: [
                {
                  text: "Intentionally left blank",
                  value: "option1"
                },
              ]
            } %>
          </div>
          <div class="govuk-grid-column-one-third">
            <%= render "govuk_publishing_components/components/select", {
              id: "dropdown1-1",
              full_width: true,
              label: "About what?",
              name: "argument",
              options: [
                {
                  text: "Intentionally left blank",
                  value: "option1"
                },
              ]
            } %>
          </div>
        </div>
        <div class="govuk-grid-row govuk-!-margin-bottom-4">
          <div class="govuk-grid-column-full">
            <%= render "govuk_publishing_components/components/button", {
              text: "Filter"
            } %>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>

<div class="govuk-grid-row govuk-!-margin-top-8">
  <div class="govuk-grid-column-full">
    <p class="govuk-body"><%= "Showing <span class='govuk-!-font-weight-bold'>#{@presenter.total_items}</span> content #{"page".pluralize(@presenter.total_items)} where users have given survey answers".html_safe %></p>
  </div>
</div>
<div class="govuk-grid-row govuk-!-margin-top-0">
  <div class="govuk-grid-column-full">
    <%= render "govuk_publishing_components/components/table", {
      sortable: true,
      head: @presenter.head,
      rows: @presenter.rows
    } %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <%= render "govuk_publishing_components/components/previous_and_next_navigation", navigation_links(@presenter) %>
  </div>
</div>
